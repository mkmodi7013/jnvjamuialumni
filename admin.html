<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login</title>
<style>
  body{font-family:Arial;display:flex;justify-content:center;align-items:center;height:100vh;background:#f5f5f5;}
  .login-container{background:#fff;padding:30px;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,0.2);width:300px;}
  input{width:100%;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:4px;}
  button{width:100%;padding:10px;background:#27b7e7;color:#fff;border:none;border-radius:4px;cursor:pointer;}
  button:hover{background:#1a95c1;}
  .error{color:red;font-size:14px;margin-top:10px;display:none;}
</style>
</head>
<body>

<div class="login-container">
  <h2 style="text-align:center;">Admin Login</h2>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button id="loginBtn">Login</button>
  <p class="error" id="errorMsg">Invalid credentials</p>
</div>

<script type="module">
  // Firebase imports
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyByBYjFFEgtmhoNnyNF55vjiVBhMteIvcQ",
    authDomain: "jnvjamuialumni-edceb.firebaseapp.com",
    projectId: "jnvjamuialumni-edceb",
    storageBucket: "jnvjamuialumni-edceb.appspot.com",
    messagingSenderId: "412877503961",
    appId: "1:412877503961:web:8cfc88edcc694a43b9edc8"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const loginBtn = document.getElementById("loginBtn");
  const errorMsg = document.getElementById("errorMsg");

  loginBtn.addEventListener("click", () => {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    signInWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        const user = userCredential.user;

        // âœ… Only allow specific admin email
        if(user.email === "mkmodi7013@gmail.com"){
          localStorage.setItem("adminLoggedIn", "true");
          window.location.href = "admin-panel.html";
        } else {
          errorMsg.textContent = "You are not authorized!";
          errorMsg.style.display = "block";
        }
      })
      .catch((error) => {
        console.error(error);
        errorMsg.textContent = "Invalid email or password!";
        errorMsg.style.display = "block";
      });
  });

  // Auto redirect if already logged in
  onAuthStateChanged(auth, (user) => {
    if(user && user.email === "mkmodi7013@gmail.com"){
      window.location.href = "updateDelete.html";
    }
  });
</script>

</body>
</html>
